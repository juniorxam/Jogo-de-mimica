<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mímica Master - Edição Trilha Sonora</title>
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --text: #f8fafc; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }
        .screen { width: 95%; max-width: 400px; background: var(--card); padding: 25px; border-radius: 24px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); max-height: 90vh; overflow-y: auto; }
        .hidden { display: none !important; }
        .input-group { margin: 15px 0; text-align: left; }
        label { font-size: 0.8rem; color: #94a3b8; font-weight: bold; }
        input { width: 100%; padding: 12px; border-radius: 10px; border: none; margin-top: 5px; background: #334155; color: white; font-size: 1rem; }
        .team-input-row { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
        .color-dot { width: 15px; height: 15px; border-radius: 50%; flex-shrink: 0; }
        .scoreboard { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 20px; }
        .team-box { background: #334155; padding: 10px; border-radius: 12px; font-size: 0.8rem; border: 3px solid transparent; transition: 0.3s; opacity: 0.6; }
        .team-box.active { opacity: 1; transform: scale(1.05); }
        .timer-display { font-size: 4.5rem; font-weight: 900; color: #f43f5e; margin: 5px 0; }
        .card { background: #f8fafc; color: #1e293b; min-height: 180px; border-radius: 20px; display: flex; flex-direction: column; align-items: center; justify-content: center; margin-bottom: 25px; border: 6px solid #38bdf8; }
        .cat-badge { background: #38bdf8; padding: 5px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; color: #0f172a; margin-bottom: 10px; text-transform: uppercase; }
        .word-text { font-size: 1.8rem; font-weight: 800; text-transform: uppercase; padding: 0 15px; text-align: center; }
        .btn { border: none; border-radius: 16px; padding: 18px; font-size: 1.1rem; font-weight: bold; cursor: pointer; width: 100%; transition: 0.2s; margin-top: 10px; }
        .btn-blue { background: #38bdf8; color: #0f172a; }
        .btn-green { background: #22c55e; color: white; }
        .btn-red { background: #ef4444; color: white; }
        .action-row { display: flex; gap: 10px; }
    </style>
</head>
<body>

    <audio id="suspense-music" src="musica.mp3" preload="auto"></audio>

    <div id="setup-screen" class="screen">
        <h2 style="color: #38bdf8; margin: 0 0 20px 0;">MÍMICA MASTER</h2>
        <div class="input-group">
            <label>TEMPO (SEG):</label>
            <input type="number" id="gameTime" value="60">
        </div>
        <div class="input-group">
            <label>EQUIPES E NOMES:</label>
            <div id="teams-setup">
                <div class="team-input-row"><div class="color-dot" style="background:#38bdf8"></div><input type="text" class="team-name-input" placeholder="Time 1" value="Azul"></div>
                <div class="team-input-row"><div class="color-dot" style="background:#f472b6"></div><input type="text" class="team-name-input" placeholder="Time 2" value="Rosa"></div>
                <div class="team-input-row"><div class="color-dot" style="background:#4ade80"></div><input type="text" class="team-name-input" placeholder="Time 3"></div>
                <div class="team-input-row"><div class="color-dot" style="background:#fbbf24"></div><input type="text" class="team-name-input" placeholder="Time 4"></div>
            </div>
        </div>
        <button class="btn btn-blue" onclick="startGame()">COMEÇAR</button>
    </div>

    <div id="game-screen" class="screen hidden">
        <div class="scoreboard" id="scoreboard"></div>
        <div id="timer" class="timer-display">00</div>
        <div class="card" id="main-card">
            <div id="cat-display" class="cat-badge">CATEGORIA</div>
            <div id="word-display" class="word-text">PRONTO?</div>
            <div id="points-display" style="font-size:0.9rem; font-weight:bold; margin-top:10px; color:#64748b"></div>
        </div>
        <div id="controls">
            <button id="btn-draw" class="btn btn-blue" onclick="drawWord()">SORTEAR PALAVRA</button>
            <button id="btn-start-timer" class="btn btn-green hidden" onclick="startCountdown()">INICIAR TURNO</button>
            <div id="game-actions" class="action-row hidden">
                <button class="btn btn-green" onclick="resolveTurn(true)">ACERTOU</button>
                <button class="btn btn-red" onclick="resolveTurn(false)">ERROU/FIM</button>
            </div>
        </div>
    </div>

    <script>
        // Banco de dados (as 300 palavras permanecem as mesmas)
        const database = {
            "Ações": [{p:1,w:"Dormir"},{p:1,w:"Correr"},{p:1,w:"Beber"},{p:2,w:"Fritar Ovo"},{p:3,w:"Pescar"},{p:4,w:"Yoga"},{p:5,w:"Surfar"},{p:6,w:"Mágica"}],
            "Profissões": [{p:1,w:"Médico"},{p:2,w:"Bombeiro"},{p:3,w:"Garçom"},{p:4,w:"Astronauta"},{p:5,w:"Estilista"},{p:6,w:"Maestro"}],
            "Animais": [{p:1,w:"Gato"},{p:2,w:"Sapo"},{p:3,w:"Jacaré"},{p:4,w:"Morcego"},{p:5,w:"Panda"},{p:6,w:"Preguiça"}],
            "Objetos": [{p:1,w:"Celular"},{p:2,w:"Martelo"},{p:3,w:"Abajur"},{p:4,w:"Lanterna"},{p:5,w:"Batom"},{p:6,w:"Sanfona"}],
            "Famosos": [{p:1,w:"Batman"},{p:2,w:"Shrek"},{p:3,w:"Barbie"},{p:4,w:"Hulk"},{p:5,w:"Einstein"},{p:6,w:"Elsa"}]
        };

        const teamColors = ["#38bdf8", "#f472b6", "#4ade80", "#fbbf24"];
        let teams = [], currentIdx = 0, timer, timeLeft, currentPoints = 0;
        const musica = document.getElementById('suspense-music');

        function falar(texto) {
            window.speechSynthesis.cancel();
            const u = new SpeechSynthesisUtterance(texto);
            u.lang = 'pt-BR';
            window.speechSynthesis.speak(u);
        }

        function startGame() {
            const inputs = document.querySelectorAll('.team-name-input');
            teams = [];
            inputs.forEach((input, i) => {
                if(input.value.trim() !== "") teams.push({ name: input.value.trim(), score: 0, color: teamColors[i] });
            });
            if(teams.length < 2) return alert("Mínimo 2 times!");
            document.getElementById('setup-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            updateUI();
        }

        function updateUI() {
            const container = document.getElementById('scoreboard');
            const activeTeam = teams[currentIdx];
            container.innerHTML = teams.map((t, i) => `
                <div class="team-box ${i === currentIdx ? 'active' : ''}" 
                     style="border-color:${i === currentIdx ? t.color : 'transparent'}; background:${i === currentIdx ? t.color+'22' : '#334155'}">
                    <span style="color:${t.color}">${t.name}</span><br><b>${t.score} PTS</b>
                </div>`).join('');
            document.getElementById('main-card').style.borderColor = activeTeam.color;
            document.getElementById('cat-display').style.background = activeTeam.color;
        }

        function drawWord() {
            const cats = Object.keys(database);
            const c = cats[Math.floor(Math.random()*cats.length)];
            const item = database[c][Math.floor(Math.random()*database[c].length)];
            currentPoints = item.p;
            document.getElementById('cat-display').innerText = c;
            document.getElementById('word-display').innerText = item.w;
            document.getElementById('points-display').innerText = `VALE ${item.p} PONTOS`;
            
            falar(`Categoria: ${c}. Vale ${item.p} pontos.`);
            
            document.getElementById('btn-draw').classList.add('hidden');
            document.getElementById('btn-start-timer').classList.remove('hidden');
        }

        function startCountdown() {
            document.getElementById('btn-start-timer').classList.add('hidden');
            document.getElementById('game-actions').classList.remove('hidden');
            timeLeft = document.getElementById('gameTime').value;
            document.getElementById('timer').innerText = timeLeft;
            
            // Inicia a sua música.mp3
            musica.currentTime = 0;
            musica.play().catch(e => console.log("Erro ao tocar música: ", e));

            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').innerText = timeLeft;
                if(timeLeft < 10) document.getElementById('timer').style.color = "#ef4444";
                
                if(timeLeft <= 0) {
                    clearInterval(timer);
                    musica.pause(); // Para a música
                    falar("O tempo acabou!");
                    resolveTurn(false);
                }
            }, 1000);
        }

        function resolveTurn(win) {
            clearInterval(timer);
            musica.pause(); // Para a música se o botão for clicado antes do tempo
            
            if(win) teams[currentIdx].score += currentPoints;
            
            // Narrar o placar (conforme a instrução salva)
            let placarTxt = win ? "Acertou! Placar: " : "Não pontuou. Placar: ";
            teams.forEach(t => placarTxt += `${t.name}, ${t.score} pontos. `);
            falar(placarTxt);

            currentIdx = (currentIdx + 1) % teams.length;
            document.getElementById('game-actions').classList.add('hidden');
            document.getElementById('btn-draw').classList.remove('hidden');
            document.getElementById('word-display').innerText = "VEZ DE: " + teams[currentIdx].name;
            document.getElementById('cat-display').innerText = "PREPARE-SE";
            document.getElementById('timer').innerText = "00";
            document.getElementById('timer').style.color = "#f43f5e";
            updateUI();
        }
    </script>
</body>
</html>
